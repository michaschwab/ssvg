!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.SSVG=e():t.SSVG=e()}(window,function(){return function(t){var e={};function s(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,s),i.l=!0,i.exports}return s.m=t,s.c=e,s.d=function(t,e,r){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)s.d(r,i,function(e){return t[e]}.bind(null,i));return r},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="",s(s.s=1)}([function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});class r{static parseTransform(t){const e={translateX:0,translateY:0,scaleX:1,scaleY:1,rotate:0,translateBeforeScale:!1,rotateLast:!1};if(t){if("string"!=typeof t)return e.scaleX=t.k,e.scaleY=t.k,e.translateX=t.x,e.translateY=t.y,e.translateBeforeScale=!0,e;let s=t;s=s.replace(/ /g,"");const r=/\s*translate\(([-0-9.]+),([-0-9.]+)\)/.exec(s);r&&(e.translateX=parseFloat(r[1]),e.translateY=parseFloat(r[2]));const i=/\s*scale\(([-0-9.]+)(,[-0-9.]+)?\)/.exec(s);i&&(e.scaleX=parseFloat(i[1]),e.scaleY=i[2]?parseFloat(i[2].substr(1)):parseFloat(i[1]));const o=/\s*rotate\(([-0-9.]+)\)/.exec(s);o&&(e.rotate=parseFloat(o[1])),/\s*translate\(([-0-9.]+),([-0-9.]+)\)scale\(([-0-9.,]+)\)/.exec(s)&&(e.translateBeforeScale=!0),/\s*rotate\(([-0-9.,]+)\)$/.exec(s)&&(e.rotateLast=!0);const n=/\s*matrix\(([-0-9.]+),([-0-9.]+),([-0-9.]+),([-0-9.]+),([-0-9.]+),([-0-9.]+)\)/.exec(s);n&&(e.scaleX=parseFloat(n[1]),e.scaleY=parseFloat(n[4]),e.translateX=parseFloat(n[5]),e.translateY=parseFloat(n[6]))}return e}static addTransforms(t,e){return{translateX:t.translateX+e.translateX,translateY:t.translateY+e.translateY,scaleX:t.scaleX*e.scaleX,scaleY:t.scaleY*e.scaleY,rotate:t.rotate+e.rotate,translateBeforeScale:!1,rotateLast:!1}}static convertSizeToPx(t,e=!0){const s=e?14:void 0;return void 0===t?s:"number"==typeof t?t:"em"===t.substr(-2)?Math.round(12*parseFloat(t)):"px"===t.substr(-2)?parseInt(t):t.match(/^[0-9]+$/)?parseInt(t):(console.warn("size in unsupported format: ",t),s)}static colorToRgba(t,e=1,s="none"){if("none"===t)return t;t||(t=s);const i=`${t}-${e}`;if(r.rgbaCache[i])return r.rgbaCache[i];if(t=r.CssNamedColorToHex(t),1===e&&"string"==typeof t)return r.rgbaCache[i]=t,t;let o;if("string"==typeof t&&"#"===t[0]){let s;if(!/^#([A-Fa-f0-9]{3}){1,2}$/.test(t))throw new Error("Bad Hex");3==(s=t.substring(1)).length&&(s=s[0]+s[0]+s[1]+s[1]+s[2]+s[2]),o="rgba("+[(s="0x"+s)>>16&255,s>>8&255,255&s].join(",")+","+e+")"}else if("object"==typeof t){if("r"in t)o="rgba("+t.r+","+t.g+","+t.b+","+e+")";else if("h"in t){const s=r.hslToRgb(t.h/360,t.s,t.l);o="rgba("+s.r+","+s.g+","+s.b+","+e+")"}}else"rgb("===t.substr(0,4)&&(o=t.substr(0,t.length-1).replace("rgb","rgba")+", "+e+")");return r.rgbaCache[i]=o,o}static hslToRgb(t,e,s){var r,i,o;if(0==e)r=i=o=s;else{var n=function(t,e,s){return s<0&&(s+=1),s>1&&(s-=1),s<1/6?t+6*(e-t)*s:s<.5?e:s<2/3?t+(e-t)*(2/3-s)*6:t},a=s<.5?s*(1+e):s+e-s*e,l=2*s-a;r=n(l,a,t+1/3),i=n(l,a,t),o=n(l,a,t-1/3)}return{r:Math.round(255*r),g:Math.round(255*i),b:Math.round(255*o)}}static CssNamedColorToHex(t){return"string"==typeof t&&i[t.toUpperCase()]?i[t.toUpperCase()]:t}static getCssRuleSpecificityNumber(t){let e=0;t=t.replace(/ >/g,">").replace(/> /g,">");const s=[].concat.apply([],t.split(" ").map(t=>t.split(">")));for(const t of s){e+=100;const s=t[0];if("#"===s)e+=1e3;else if("."===s){const s=t.split(".").length-1;e+=Math.min(900,100*s)}}return e}}r.rgbaCache={},e.default=r;const i={ALICEBLUE:"#F0F8FF",ANTIQUEWHITE:"#FAEBD7",AQUA:"#00FFFF",AQUAMARINE:"#7FFFD4",AZURE:"#F0FFFF",BEIGE:"#F5F5DC",BISQUE:"#FFE4C4",BLACK:"#000000",BLANCHEDALMOND:"#FFEBCD",BLUE:"#0000FF",BLUEVIOLET:"#8A2BE2",BROWN:"#A52A2A",BURLYWOOD:"#DEB887",CADETBLUE:"#5F9EA0",CHARTREUSE:"#7FFF00",CHOCOLATE:"#D2691E",CORAL:"#FF7F50",CORNFLOWERBLUE:"#6495ED",CORNSILK:"#FFF8DC",CRIMSON:"#DC143C",CYAN:"#00FFFF",DARKBLUE:"#00008B",DARKCYAN:"#008B8B",DARKGOLDENROD:"#B8860B",DARKGRAY:"#A9A9A9",DARKGREY:"#A9A9A9",DARKGREEN:"#006400",DARKKHAKI:"#BDB76B",DARKMAGENTA:"#8B008B",DARKOLIVEGREEN:"#556B2F",DARKORANGE:"#FF8C00",DARKORCHID:"#9932CC",DARKRED:"#8B0000",DARKSALMON:"#E9967A",DARKSEAGREEN:"#8FBC8F",DARKSLATEBLUE:"#483D8B",DARKSLATEGRAY:"#2F4F4F",DARKSLATEGREY:"#2F4F4F",DARKTURQUOISE:"#00CED1",DARKVIOLET:"#9400D3",DEEPPINK:"#FF1493",DEEPSKYBLUE:"#00BFFF",DIMGRAY:"#696969",DIMGREY:"#696969",DODGERBLUE:"#1E90FF",FIREBRICK:"#B22222",FLORALWHITE:"#FFFAF0",FORESTGREEN:"#228B22",FUCHSIA:"#FF00FF",GAINSBORO:"#DCDCDC",GHOSTWHITE:"#F8F8FF",GOLD:"#FFD700",GOLDENROD:"#DAA520",GRAY:"#808080",GREY:"#808080",GREEN:"#008000",GREENYELLOW:"#ADFF2F",HONEYDEW:"#F0FFF0",HOTPINK:"#FF69B4",INDIANRED:"#CD5C5C",INDIGO:"#4B0082",IVORY:"#FFFFF0",KHAKI:"#F0E68C",LAVENDER:"#E6E6FA",LAVENDERBLUSH:"#FFF0F5",LAWNGREEN:"#7CFC00",LEMONCHIFFON:"#FFFACD",LIGHTBLUE:"#ADD8E6",LIGHTCORAL:"#F08080",LIGHTCYAN:"#E0FFFF",LIGHTGOLDENRODYELLOW:"#FAFAD2",LIGHTGRAY:"#D3D3D3",LIGHTGREY:"#D3D3D3",LIGHTGREEN:"#90EE90",LIGHTPINK:"#FFB6C1",LIGHTSALMON:"#FFA07A",LIGHTSEAGREEN:"#20B2AA",LIGHTSKYBLUE:"#87CEFA",LIGHTSLATEGRAY:"#778899",LIGHTSLATEGREY:"#778899",LIGHTSTEELBLUE:"#B0C4DE",LIGHTYELLOW:"#FFFFE0",LIME:"#00FF00",LIMEGREEN:"#32CD32",LINEN:"#FAF0E6",MAGENTA:"#FF00FF",MAROON:"#800000",MEDIUMAQUAMARINE:"#66CDAA",MEDIUMBLUE:"#0000CD",MEDIUMORCHID:"#BA55D3",MEDIUMPURPLE:"#9370DB",MEDIUMSEAGREEN:"#3CB371",MEDIUMSLATEBLUE:"#7B68EE",MEDIUMSPRINGGREEN:"#00FA9A",MEDIUMTURQUOISE:"#48D1CC",MEDIUMVIOLETRED:"#C71585",MIDNIGHTBLUE:"#191970",MINTCREAM:"#F5FFFA",MISTYROSE:"#FFE4E1",MOCCASIN:"#FFE4B5",NAVAJOWHITE:"#FFDEAD",NAVY:"#000080",OLDLACE:"#FDF5E6",OLIVE:"#808000",OLIVEDRAB:"#6B8E23",ORANGE:"#FFA500",ORANGERED:"#FF4500",ORCHID:"#DA70D6",PALEGOLDENROD:"#EEE8AA",PALEGREEN:"#98FB98",PALETURQUOISE:"#AFEEEE",PALEVIOLETRED:"#DB7093",PAPAYAWHIP:"#FFEFD5",PEACHPUFF:"#FFDAB9",PERU:"#CD853F",PINK:"#FFC0CB",PLUM:"#DDA0DD",POWDERBLUE:"#B0E0E6",PURPLE:"#800080",REBECCAPURPLE:"#663399",RED:"#FF0000",ROSYBROWN:"#BC8F8F",ROYALBLUE:"#4169E1",SADDLEBROWN:"#8B4513",SALMON:"#FA8072",SANDYBROWN:"#F4A460",SEAGREEN:"#2E8B57",SEASHELL:"#FFF5EE",SIENNA:"#A0522D",SILVER:"#C0C0C0",SKYBLUE:"#87CEEB",SLATEBLUE:"#6A5ACD",SLATEGRAY:"#708090",SLATEGREY:"#708090",SNOW:"#FFFAFA",SPRINGGREEN:"#00FF7F",STEELBLUE:"#4682B4",TAN:"#D2B48C",TEAL:"#008080",THISTLE:"#D8BFD8",TOMATO:"#FF6347",TURQUOISE:"#40E0D0",VIOLET:"#EE82EE",WHEAT:"#F5DEB3",WHITE:"#FFFFFF",WHITESMOKE:"#F5F5F5",YELLOW:"#FFFF00",YELLOWGREEN:"#9ACD32"}},function(t,e,s){"use strict";const r=(this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}})(s(2));t.exports=r.default},function(t,e,s){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const i=r(s(3)),o=r(s(6)),n=r(s(0)),a=r(s(7));class l{constructor(t){if(this.unassignedNodes=[],this.interactionSelections=[],this.svgAssignedAndSizeSet=!1,this.lastCanvasDrawTimes=[],this.enterExitQueue=[],this.safeMode=!1,this.useWorker=!0,this.getFps=(()=>{}),t&&(void 0!==t.safeMode&&(this.safeMode=t.safeMode),this.maxPixelRatio=t.maxPixelRatio,void 0!==t.useWorker&&(this.useWorker=t.useWorker),void 0!==t.getFps&&(this.getFps=t.getFps)),this.canvas=document.createElement("canvas"),"OffscreenCanvas"in window||(this.useWorker=!1),this.useWorker){this.worker=new a.default,this.worker.onmessage=(t=>{t.data&&t.data.msg&&"DRAWN"===t.data.msg&&(this.logDrawn(),this.updateCanvas())});const t=()=>{this.updateFps(),requestAnimationFrame(t)};t()}else{const t=()=>{this.updateFps(),this.logDrawn(),this.updateCanvas(),requestAnimationFrame(t)};t()}this.captureD3On();const e=t&&t.svg?t.svg:void 0;this.setupElementsIfSvgExists(e),this.canvas.addEventListener("mousedown",t=>this.propagateMouseEvent(t)),this.canvas.addEventListener("touchstart",t=>this.propagateTouchEvent(t)),this.canvas.addEventListener("mousemove",t=>{const e=this.hoveredElement;this.hoveredElement=this.propagateMouseEvent(t),e!==this.hoveredElement&&e&&e.dispatchEvent(new MouseEvent("mouseout",t)),this.propagateMouseEvent(t,"mouseover")}),this.canvas.addEventListener("touchmove",t=>{const e=this.hoveredElement;this.hoveredElement=this.propagateTouchEvent(t),e!==this.hoveredElement&&e&&e.dispatchEvent(this.duplicateTouchEvent(t,"mouseout")),this.propagateTouchEvent(t,"mouseover")}),this.canvas.addEventListener("mouseup",t=>this.propagateMouseEvent(t)),this.canvas.addEventListener("touchend",t=>this.propagateTouchEvent(t)),this.canvas.addEventListener("click",t=>this.propagateMouseEvent(t)),this.canvas.addEventListener("wheel",t=>this.propagateWheelEvent(t)),this.replaceNativeRemoveChild(),this.replaceNativeAttribute(),this.replaceNativePathFunctions(),this.replaceNativeCreateElement(),this.replaceNativeAppendChild(),this.replaceD3Attr(),this.replaceNativeSelect(),this.replaceNativeGetComputedStyle(),this.replaceD3Select(),this.replaceD3Remove(),setTimeout(()=>{console.log(this.vdom.data)},1e3)}setupElementsIfSvgExists(t){if(this.svg)return!0;const e=t||document.getElementsByTagName("svg")[0];if(!e)return!1;const s=-1===document.location.href.indexOf("?")?"?":"&",r=document.location.href+s+"svg",o=document.createComment(" This project uses SSVG.io to render a SVG as Canvas.\r\nTo inspect the SVG, please open the following URL:\r\n"+r+"\r\n");this.svg=e;const n=this.svg.parentElement;if(this.svg.nextSibling){const t=this.svg.nextSibling;n.insertBefore(o,t),n.insertBefore(this.canvas,t)}else n.appendChild(o),n.appendChild(this.canvas);return this.domHandler=new i.default(this.svg,this.useWorker,this.useWorker),this.vdom=this.domHandler.getVDom(),this.setCanvasSize(),!0}updateCanvas(){if(!this.svgAssignedAndSizeSet)return;if(!this.vdom.hasChanges()&&!this.domHandler.hasChanges())return void requestAnimationFrame(()=>this.updateCanvas());const t=this.useWorker?void 0:(t,e)=>this.renderer.nodeUpdated(t,e);this.domHandler.applyStyles(),this.vdom.transferBufferQueueData();const e=this.vdom.getQueue();this.vdom.clearQueue(),this.vdom.updatePropertiesFromQueue(e,t),this.useWorker?this.sendUpdateToWorker(e):(this.renderer.updatePropertiesFromQueue&&this.renderer.updatePropertiesFromQueue(e),this.renderer.draw())}setCanvasSize(){if(this.svg&&this.vdom.data.width&&this.vdom.data.height){if(this.vdom.data.scale=window.devicePixelRatio,void 0!==this.maxPixelRatio&&this.vdom.data.scale>this.maxPixelRatio&&(this.vdom.data.scale=this.maxPixelRatio),this.canvas.style.width=this.vdom.data.width+"px",this.canvas.style.height=this.vdom.data.height+"px",this.canvas.width=this.vdom.data.width*this.vdom.data.scale,this.canvas.height=this.vdom.data.height*this.vdom.data.scale,this.useWorker){const t=this.canvas.transferControlToOffscreen();this.sendToWorker({cmd:"INIT",data:{canvas:t,visData:this.vdom.data,safeMode:this.safeMode}},[t]),this.vdom.ensureNodesMapped()}else this.renderer=new o.default(this.vdom,this.canvas,this.safeMode,()=>{});this.svgAssignedAndSizeSet=!0}}isWithinSvg(t){let e=!1,s=t;for(;s&&s.parentNode;)s===this.svg&&(e=!0),s=s.parentNode;return e}captureD3On(){if(window.d3){const t=window.d3,e=t.selection.prototype.on,s=this;t.selection.prototype.on=function(){let t=this._parents&&this._parents.length?this._parents[0]:this[0].parentNode;t===document.children[0]&&(t=s.svg);let r=s.isWithinSvg(t);return t&&r&&-1===s.interactionSelections.indexOf(t)&&s.interactionSelections.push(t),e.apply(this,arguments)}}}replaceD3Select(){if(window.d3){const t=this,e=window.d3,s=s=>(function(r){if("string"==typeof r){if("body"===r)return s.apply(this,arguments);let i;if(!(i=this===e?[t.svg]:this._groups?this._groups[0]:this[0]).filter(t=>t).length)return function(...t){h<200&&(h++,console.log(...t))}("element not found within svg, using normal execution",this,r),s.apply(this,arguments);let o=[];for(let e=0;e<i.length;e++){const n=i[e],a=t.domHandler.getVisNode(n);if(!a)return console.warn("node not found",n),s.apply(this,arguments);const l=t.vdom.getVisNodesFromSelector(a,r);o=o.concat(l.map(e=>t.domHandler.getElementFromNode(e)))}const n=s.apply(this,arguments);if((n._groups?n._groups[0]:n[0]).forEach(t=>{const e=t;-1===o.indexOf(e)&&o.push()}),n._groups)n._groups[0]=o;else{const t=n[0].parentNode;n[0]=o,n[0].parentNode=t}return n}return s.apply(this,arguments)});e.selection.prototype.selectAll=s(e.selection.prototype.selectAll),e.selectAll=s(e.selectAll),e.selection.prototype.select=s(e.selection.prototype.select),e.select=s(e.select);const r=e.selection.prototype.filter;e.selection.prototype.filter=function(e){const s=this._groups?this._groups[0]:this[0];if("string"!=typeof e)return r.apply(this,arguments);let i=s[0],o=1;for(;!i&&o<s.length;)i=s[++o];const n=i?t.domHandler.getNodeFromElement(i.parentNode):null,a=s.map(e=>t.domHandler.getNodeFromElement(e)),l=e.split(",").map(t=>t.trim()),h=[];for(const e of l){const s=t.vdom.filterNodesBySelector(n,a,e);for(const t of s)-1===h.indexOf(t)&&h.push(t)}const d=h.map(e=>t.domHandler.getElementFromNode(e)),c=r.apply(this,arguments);if(c._groups)c._groups[0]=d;else{const t=c[0].parentNode;c[0]=d,c[0].parentNode=t}return c}}}replaceNativeGetComputedStyle(){const t=window.getComputedStyle,e=this;window.getComputedStyle=function(s){if(s&&!e.isWithinSvg(s)&&s!==window)return t.call(this,s);const r=e.domHandler.getNodeFromElement(s);return r?{getPropertyValue:t=>r.style[t]}:(console.warn("node not found for ",this,s),t.call(this,s))}}replaceNativeSelect(){const t=Element.prototype.querySelector,e=this;Element.prototype.querySelector=function(s){if(!e.isWithinSvg(this))return t.apply(this,arguments);const r=e.domHandler.getVisNode(this),i=e.vdom.getVisNodesFromSelector(r,s);return 0===i.length?(console.warn("could not find selection",this,r,r.globalElementIndex,s),null):e.domHandler.getElementFromNode(i[0])}}replaceD3Attr(){const t=this;function e(e,s=""){return function(r,i){if(void 0===i){if(-1!==t.unassignedNodes.indexOf(this))return e.apply(this,arguments);{const s=this._groups?this._groups[0]:this[0];if(s[0]&&!t.isWithinSvg(s[0]))return e.apply(this,arguments);if(s.length>1){const e=[];for(const i of s)e.push(t.domHandler.getAttributeFromSelector(i,r));return e}return t.domHandler.getAttributeFromSelector(s[0],r)}}{if("class"===r||!t.svg)return e.apply(this,arguments);let o=this._groups?this._groups[0]:this[0];if("object"==typeof o&&1===Object.keys(o).length&&o.parentNode){const e=o.parentNode;let s;s=e!==document.children[0]?t.domHandler.getVisNode(e):t.vdom.data,o=[];for(const e of s.children)o.push(t.domHandler.getElementFromNode(e))}if(!o)return e.apply(this,arguments);const n=[];try{for(const t of o)t&&n.push(t)}catch(t){console.error(o,this),console.error(t)}if(1===n.length){const o=n[0];if(!o)return console.warn("element not found",this,r,i),this;if(!t.isWithinSvg(o))return e.apply(this,arguments);t.domHandler.queueSetAttributeOnElement(o,s+r,i)}else{if(!t.isWithinSvg(o[0]))return e.apply(this,arguments);t.domHandler.queueSetAttributeOnSelection(n,s+r,i)}return n[0]!==t.svg||"width"!==r&&"height"!==r||(t.vdom.data[r]=parseInt(i),t.setCanvasSize()),this}}}if(window.d3){const s=window.d3,r=s.selection.prototype.attr;s.selection.prototype.attr=e(r);const i=s.selection.prototype.style;s.selection.prototype.style=e(i,"style;");const o=s.selection.prototype.classed;s.selection.prototype.classed=function(e,s){if(void 0!==s){t.domHandler.enableFrontendDesignProperties();let r=this._groups?this._groups[0]:this[0],i=-1;for(let o of r)if(i++,o){const r=t.domHandler.getNodeFromElement(o);if(!r){console.warn("node not found",o);continue}const n=r.className||"",a="function"==typeof s?s(o.__data__,i):s;if(!0===a){if(-1===n.indexOf(e)){let s=(n+" "+e).trim();t.domHandler.queueSetAttributeOnElement(o,"class",s)}}else if(!1===a){if(-1!==n.indexOf(e)){const s=n.replace(e,"").replace("  "," ");t.domHandler.queueSetAttributeOnElement(o,"class",s),r.removedClasses||(r.removedClasses=[]),r.removedClasses.push(e)}}}}return o.apply(this,arguments)};const n=s.selection.prototype.transition;s.selection.prototype.transition=function(){return t.domHandler.enableFrontendDesignProperties(),n.apply(this,arguments)};const a=s.selection.prototype.text;s.selection.prototype.text=function(e){if(void 0!==e){let s=this._groups?this._groups[0]:this[0],r=0;for(let i of s)i&&t.isWithinSvg(i)&&t.domHandler.queueSetAttributeOnElement(i,"text",e),r++}return a.apply(this,arguments)}}}replaceD3Remove(){if(window.d3){const t=window.d3,e=this.getNewRemoveChild(()=>{},!0),s=function(){let t=this._groups?this._groups[0]:this[0];if(t.length){let s=null;for(let r=t.length-1;r>-1;r--){const i=t[r];i&&((s=i.parentNode)||console.error("element has no parent node",i),e.call(s,i))}}return this};t.selection.prototype.remove=s}}replaceNativeCreateElement(){const t=document.createElementNS,e=this;document.createElementNS=function(){let s=Array.from(arguments);const r=t.apply(this,s);return r.appendChild=e.getNewAppendChild(r.appendChild),e.unassignedNodes.push(r),r}}getNewRemoveChild(t,e=!1){const s=this;return function(r){if(!this)return console.error("context not defined"),r;if(!s.isWithinSvg(r))return t.apply(this,arguments);const i=s.domHandler.getNodeFromElement(this),o=s.domHandler.getNodeFromElement(r);return o?(Object.defineProperty(r,"parentNode",{writable:!0,value:void 0}),s.enterExitQueue.push({cmd:"EXIT",childGlobalIndex:r.globalElementIndex,parentGlobalIndex:i.globalElementIndex}),s.domHandler.removeNode(r,o,i),e||i||console.error("parent not found",i,this,r),delete r.selector,r):(console.error("node not found",o,r,this,i),t.apply(this,arguments))}}replaceNativeRemoveChild(){Element.prototype.removeChild=this.getNewRemoveChild(Element.prototype.removeChild)}getNewAppendChild(t){const e=this;return function(s){if(!e.svgAssignedAndSizeSet){if(e.svg||"svg"!==s.tagName)return t.apply(this,arguments);{const r=t.apply(this,arguments);return e.setupElementsIfSvgExists(s),r}}if(!e.isWithinSvg(this))return t.apply(this,arguments);Object.defineProperty(s,"ownerSVGElement",{writable:!0,value:e.svg}),s.appendChild=(r=>e.getNewAppendChild(t).call(s,r));const r=e.domHandler.getNodeFromElement(this);if(!r)return console.error("parent node not found",this);let i,o=!1;if(s.globalElementIndex?(i=e.domHandler.getVisNode(s),e.getNewRemoveChild(()=>{}).call(this,s),o=!0):i=e.domHandler.getNodeDataFromEl(s),Object.defineProperty(s,"style",{writable:!0,value:{setProperty:function(t,r){e.domHandler.queueSetAttributeOnElement(s,"style;"+t,r)},getPropertyValue:function(t){return e.domHandler.enableFrontendDesignProperties(),i.style[t]},removeProperty:function(){console.log("remove property not yet implemented.")}}}),Object.defineProperty(s,"parentNode",{writable:!0,value:this}),e.domHandler.linkNodeToElement(i,s),e.vdom.addNodeToParent(i,r.globalElementIndex),e.domHandler.restyleNode(i),e.useWorker?e.enterExitQueue.push({cmd:"ENTER",node:i,parentGlobalIndex:r.globalElementIndex,keepChildren:o}):e.renderer.addNode&&e.renderer.addNode(i),-1!==e.unassignedNodes.indexOf(s)){const t=e.unassignedNodes.indexOf(s);e.unassignedNodes.splice(t,1)}return s}}replaceNativeAppendChild(){const t=Element.prototype.appendChild,e=this.getNewAppendChild(t);Element.prototype.appendChild=e,Element.prototype.insertBefore=function(t,s){return e.call(this,t),t}}replaceNativePathFunctions(){const t=this,e=SVGPathElement.prototype.getTotalLength;SVGPathElement.prototype.getTotalLength=function(){if(t.isWithinSvg(this)){const e=this.getAttribute("d");t.origSetAttribute.call(this,"d",e)}return e.apply(this,arguments)}}replaceNativeAttribute(){const t=Element.prototype.setAttribute;this.origSetAttribute=t;const e=Element.prototype.setAttributeNS,s=Element.prototype.getAttribute,r=this;Element.prototype.setAttribute=function(e,s){if("easypz"!==e&&-1===r.unassignedNodes.indexOf(this)){if("class"===e&&t.apply(this,arguments),!r.isWithinSvg(this))return t.apply(this,arguments);r.domHandler.queueSetAttributeOnElement(this,e,s)}else t.apply(this,arguments)},Element.prototype.setAttributeNS=function(t,s){if("easypz"!==t&&-1===r.unassignedNodes.indexOf(this)){if("class"===t&&e.apply(this,arguments),!r.isWithinSvg(this))return e.apply(this,arguments);r.domHandler.queueSetAttributeOnElement(this,t,s)}else e.apply(this,arguments)},Element.prototype.getAttribute=function(t){if(-1!==r.unassignedNodes.indexOf(this))return s.apply(this,arguments);try{return r.domHandler.getAttributeFromSelector(this,t)}catch(t){return console.error(t),s.apply(this,arguments)}}}propagateMouseEvent(t,e){return this.propagateEvent(new MouseEvent(e||t.type,t))}duplicateTouchEvent(t,e){const s=document.createEvent("TouchEvent");e||(e=t.type),s.initEvent(e,!0,!1);for(const e in t)"isTrusted"!==e&&t.hasOwnProperty(e)&&Object.defineProperty(s,e,{writable:!0,value:t[e]});Object.defineProperty(s,"type",{writable:!0,value:e});const r=[];for(let e=0;e<t.touches.length;e++){const s=t.touches[e];r.push({identifier:s.identifier,pageX:s.pageX,pageY:s.pageY,clientX:s.clientX,clientY:s.clientY})}return Object.defineProperty(s,"touches",{writable:!0,value:r}),s}propagateTouchEvent(t,e){return this.propagateEvent(this.duplicateTouchEvent(t,e))}propagateWheelEvent(t){return this.propagateEvent(new WheelEvent(t.type,t))}propagateEvent(t){let e;this.svg.dispatchEvent(t);const{x:s,y:r}=l.getMousePosition(t);for(let i of this.interactionSelections){let o=this.domHandler.getVisNode(i),n=1;if(o)for(let i of o.children){let o=this.nodeAtPosition(i,s-10,r-10);if(o){const s=this.domHandler.getElementFromNode(i),r=this.domHandler.getElementFromNode(o);r&&Object.defineProperty(t,"target",{writable:!0,value:r}),r&&(e=r,r.dispatchEvent(t)),s!==r&&(e||(e=s),s.dispatchEvent(t))}n++}else;}return e}static getMousePosition(t){let e={x:0,y:0};if(-1!==["wheel","click","mousemove","mousedown","mouseup","dblclick","contextmenu","mouseenter","mouseleave","mouseout","mouseover"].indexOf(t.type)&&t.clientX)e={x:t.clientX,y:t.clientY};else if("touch"===t.type.substr(0,5)){const s=t.touches?t.touches:[];if(s.length<1)return null;e={x:s[0].clientX,y:s[0].clientY}}else!function(...t){h<200&&(h++,console.error(...t))}("no event pos for event type ",t);return e}nodeAtPosition(t,e,s){if("circle"===t.type){let r=this.vdom.get(t,"cx")||0,i=this.vdom.get(t,"cy")||0;if(t.transform){const e=n.default.parseTransform(t.transform);e.translateX&&(r+=e.translateX),e.translateY&&(i+=e.translateY)}return Math.sqrt(Math.pow(r-e,2)+Math.pow(i-s,2))<t.r&&t}if("rect"===t.type||"image"===t.type){let r=this.vdom.get(t,"x")||0,i=this.vdom.get(t,"y")||0;const o=t.width,a=t.height;if(t.transform){const e=n.default.parseTransform(t.transform);e.translateX&&(r+=e.translateX),e.translateY&&(i+=e.translateY)}const l=r+o/2,h=i+a/2,d=Math.abs(l-e),c=Math.abs(h-s);return d<o/2&&c<a/2&&t}if("g"===t.type){const r=this.domHandler.getTotalTransformation(t);r.translateX&&(e-=r.translateX),r.translateY&&(s-=r.translateY);let i=!1;for(let r=0;r<t.children.length;r++)this.nodeAtPosition(t.children[r],e,s)&&(i=t.children[r]);return i}return!1}logDrawn(){this.lastCanvasDrawTimes.push(Date.now()),this.lastCanvasDrawTimes.length>100&&this.lastCanvasDrawTimes.shift()}updateFps(){if(this.lastCanvasDrawTimes.length){const t=Date.now()-this.lastCanvasDrawTimes[0],e=Math.round(this.lastCanvasDrawTimes.length/t*1e3);this.getFps(e)}}sendUpdateToWorker(t){const e={cmd:"UPDATE_NODES",data:{enterExit:this.enterExitQueue,update:t}};this.sendToWorker(e),this.enterExitQueue=[]}sendToWorker(t,e){this.worker.postMessage(t,e)}}e.default=l;let h=0},function(t,e,s){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const i=s(4),o=r(s(0)),n=s(5);e.default=class{constructor(t,e,s){this.svg=t,this.ignoreDesign=s,this.nodes={},this.elements={},this.nodesToRestyle=[],this.maxGlobalElementIndex=0,this.removedNodeIndices=[];const r={type:"svg",width:parseInt(this.svg.getAttribute("width")),height:parseInt(this.svg.getAttribute("height")),scale:1,children:[],globalElementIndex:0,style:{},css:{}};this.vdom=new i.VdomManager(r,s),this.linkNodeToElement(r,this.svg),this.svg.style.display="none",this.svg.selector="svg",this.addChildNodesToVisData(this.svg.childNodes,this.vdom.data)}hasChanges(){return this.nodesToRestyle.length>0}enableFrontendDesignProperties(){this.ignoreDesign=!1,this.vdom.enableFrontendDesignProperties()}getVDom(){return this.vdom}queueSetAttributeOnElement(t,e,s){this.vdom.ensureInitialized(e,!1);const r=this.getNodeFromElement(t),i=this.getNodeFromElement(t.parentNode).children.map(t=>t.globalElementIndex).indexOf(r.globalElementIndex),o="function"==typeof s?s.call(t,t.__data__,i):s;if(r){if(this.vdom.set(r,e,o,!1),"href"===e&&function(...t){a<50&&(a++,console.log(...t))}("href not yet supported."),"class"===e||-1!==e.indexOf("style"))if("class"===e)r.className=o,this.nodesToRestyle.push(r);else{const t=e.substr(6);r.style||console.error("no styles on node ",r),r.style[t]=o}}else console.error("node not found for ",t)}queueSetAttributeOnSelection(t,e,s){if(t.length&&t[0]){this.vdom.ensureInitialized(e,!0,this.maxGlobalElementIndex),this.getNodeFromElement(t[0].parentNode).children.map(t=>t.globalElementIndex);for(let r=0;r<t.length;r++){const i=t[r],o="function"==typeof s?s(i.__data__,r):s;this.vdom.set(i,e,o)}if("className"===e||-1!==e.indexOf("style"))for(let r=0;r<t.length;r++){const i=this.getNodeFromElement(t[r]),o="function"==typeof s?s(t[r].__data__,r):s;if("className"===e)i.className=o,this.nodesToRestyle.push(i);else{const t=e.substr(6);i.style[t]=o}}}}getAttributeFromSelector(t,e){const s=this.getNodeFromElement(t);if(!s)throw console.error("trying to get attribute for unfit selection",s,t,e),Error("element not found");return s[e]}getVisNode(t){return t===this.svg?this.vdom.data:this.vdom.getNodeFromIndex(t.globalElementIndex)}getNodeDataFromEl(t){const e=t.tagName.toLowerCase(),s={type:e,className:t.getAttribute("class"),transform:t.getAttribute("transform"),id:t.getAttribute("id"),style:{},css:{},children:[],globalElementIndex:-1,text:!t.childNodes||1===t.childNodes.length&&!t.childNodes[0].tagName?t.textContent:void 0};for(const r of n.RELEVANT_ATTRS[e])if(t.hasAttribute(r)){const e=t.getAttribute(r);s[r]=n.ROUNDED_ATTRS[r]?parseFloat(e):e}return this.copyStylesFromElement(t,s),s}copyStylesFromElement(t,e){for(const s of n.CSS_STYLES)if(t.style.hasOwnProperty(s)&&t.style[s]&&"function"!=typeof t.style[s]){const r=s.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();e.style[r]=t.style[s]}}applyStyles(){if(this.nodesToRestyle&&this.nodesToRestyle.length){for(let t=0;t<document.styleSheets.length;t++){const e=document.styleSheets[t],s=e.rules?e.rules:e.cssRules;for(let t=0;t<s.length;t++){const e=s[t],r=e.selectorText;r&&this.applyRuleToMatchingNodes(r,e)}}this.nodesToRestyle=[]}}applyRuleToMatchingNodes(t,e){const s=(t=t.trim()).replace(" >",">").replace("> ",">").replace("svg>","").split(" ").map(t=>t.split(">")),r=this.nodesToRestyle.map(t=>t.globalElementIndex);for(const t of this.nodesToRestyle)if(t){let e=this.getNodeParent(t);for(;e&&-1===r.indexOf(e.globalElementIndex);)r.push(e.globalElementIndex),e=this.getNodeParent(e)}const o={};for(const t of r)o[t]=!0;const a=(e,s,r)=>{if(s.style[e]){const i=`css;${t};${e}`;this.vdom.ensureInitialized(i),this.vdom.set(r,i,s.style[e])}},l=(r,h=0,d=0)=>{const c=s[h][d];for(let u=0;u<r.children.length;u++){const f=r.children[u];if(o[f.globalElementIndex])if(i.VdomManager.isCssRulePartialMatch(c,f,r)){if(s[h].length>d+1)l(f,h,d+1);else if(s.length>h+1)l(f,h+1,d);else if(!f.css[t])for(const t of n.CSS_STYLES)a(t,e,f)}else{if(f.removedClasses){for(const e of f.removedClasses)f.className+=" "+e,i.VdomManager.isCssRulePartialMatch(c,f,r)&&this.removeRuleStylesFromNode(t,f),f.className=f.className.substr(0,f.className.length-e.length-1);setTimeout(()=>{delete f.removedClasses})}l(f,h,d)}}return!1};return l(this.vdom.data)}removeRuleStylesFromNode(t,e){e.css[t]&&(this.vdom.ensureInitialized(`css;${t};*`),this.vdom.set(e,`css;${t};*`,""))}removeNode(t,e,s){this.vdom.removeNode(e,s),this.nodes[e.globalElementIndex]=null,this.elements[t.globalElementIndex]=null;const r=this.nodesToRestyle.indexOf(e);-1!==r&&this.nodesToRestyle.splice(r,1),this.removedNodeIndices.push(t.globalElementIndex)}restyleNode(t){if(!this.nodes[t.globalElementIndex]||this.nodes[t.globalElementIndex]!==t)throw console.error(t),new Error("restyling incorrect node");this.nodesToRestyle.push(t)}addChildNodesToVisData(t,e){for(let s=0;s<t.length;s++){let r=t[s];try{const t=this.getNodeDataFromEl(r);e.children.push(t),this.linkNodeToElement(t,r),this.nodesToRestyle.push(t),r.childNodes&&this.addChildNodesToVisData(r.childNodes,t),t.type,t.type}catch(t){}}}combineElementSelectors(t,e,s){return t+" > "+e+":nth-child("+s+")"}getNodeParent(t){if(t===this.vdom.data)return null;const e=this.getElementFromNode(t);if(!e)return console.error("can not find element for node ",t),null;const s=e.parentNode;return this.getNodeFromElement(s)}getNewElementIndex(){return this.removedNodeIndices.length?this.removedNodeIndices.shift():(this.maxGlobalElementIndex++,this.maxGlobalElementIndex-1)}linkNodeToElement(t,e){const s=this.getNewElementIndex();t.globalElementIndex=s,e.globalElementIndex=s,this.nodes[s]=t,this.elements[s]=e,this.vdom.addNode(t)}getElementFromNode(t){return t===this.vdom.data?this.svg:this.elements[t.globalElementIndex]}getNodeFromElement(t){return t===this.svg?this.vdom.data:this.vdom.getNodeFromIndex(t.globalElementIndex)}getParentNode(t){const e=this.getElementFromNode(t).parentNode;return this.getNodeFromElement(e)}getTotalTransformation(t){let e=this.getParentNode(t);const s=[t];for(;e;)s.push(e),e=this.getParentNode(e);e=s.pop();let r={translateX:0,translateY:0,scaleX:0,scaleY:0,rotate:0,translateBeforeScale:!1,rotateLast:!1};for(;e;){const t=o.default.parseTransform(e.transform);r=o.default.addTransforms(r,t),e=s.pop()}return r}};let a=0},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});class r{constructor(t,e){this.data=t,this.ignoreDesign=e,this.sharedData={},this.sharedDataQueue={},this.sharedDataQueueBuffers={},this.queue={},this.useSharedArrayFor=["cx","cy","x1","x2","y1","y2","x","y"],this.indexToNodeMap={},this.changed=!1,this.cachedListSelections={},this.ensureNodesMapped()}ensureInitialized(t,e=!0,s){if("class"===t&&(t="className"),e&&-1!==this.useSharedArrayFor.indexOf(t)){const e=s<500?1e3:Math.round(2*s);if(this.sharedData[t]){const s=Int32Array.BYTES_PER_ELEMENT*e;if(this.sharedData[t].byteLength/s<.6){const{buffer:s,values:r}=this.createBufferTransferValues(e,this.sharedDataQueue[t]);this.sharedDataQueue[t]=r,this.sharedDataQueueBuffers[t]=s}}else{let s;!this.queue[t]||this.queue[t]instanceof SharedArrayBuffer||(s=this.queue[t]);const{buffer:r,values:i}=this.createBufferTransferValues(e,void 0,s);this.sharedDataQueue[t]=i,this.sharedDataQueueBuffers[t]=r}}else this.queue[t]||(this.queue[t]={})}createBufferTransferValues(t,e,s){let i=new SharedArrayBuffer(Int32Array.BYTES_PER_ELEMENT*t);const o=new Int32Array(i);if(s)for(const t in s)if(s.hasOwnProperty(t)){let e=s[t];"string"==typeof e&&(e=parseFloat(e)),o[t]=e*r.BUFFER_PRECISION_FACTOR}if(e)for(let t=0;t<e.length;t++)e[t]&&(o[t]=e[t]);return{buffer:i,values:o}}set(t,e,s,i=!0){if("class"===e&&(e="className"),void 0===t.globalElementIndex)throw console.error("No index",t),new Error("Element has no index");const o=t.globalElementIndex,n=i&&-1!==this.useSharedArrayFor.indexOf(e)?"shared":"raw";try{this.changed=!0,"shared"===n?("string"==typeof s&&(s=parseFloat(s)),s*=r.BUFFER_PRECISION_FACTOR,0===(s=Math.round(s))&&(s=56938516),this.sharedDataQueue[e][o]=s):(this.queue[e][o]=s,this.sharedDataQueue[e]&&this.sharedData[e][o]&&(this.sharedDataQueue[e][o]=0))}catch(s){console.error(s),console.log(this.queue,this.sharedData,n,e,t,o)}}removePendingChanges(t){const e=t.globalElementIndex;for(const t in this.queue)this.queue.hasOwnProperty(t)&&delete this.queue[t][e];for(const t in this.sharedData)this.sharedDataQueue.hasOwnProperty(t)&&(this.sharedDataQueue[t][e]=0)}ensureNodesMapped(){const t=e=>{void 0===e.globalElementIndex&&console.error("no element index",e),this.indexToNodeMap[e.globalElementIndex]=e;for(const s of e.children)t(s)};t(this.data)}enableFrontendDesignProperties(){this.ignoreDesign=!1}addNodeToParent(t,e){if("svg"!==t.type){const s=this.getNodeFromIndex(e);if(!s)return console.error("could not add node without parent",e,t,Object.keys(this.indexToNodeMap)),void new Error("parent not found");s.children.push(t)}}addNode(t){this.indexToNodeMap[t.globalElementIndex]=t}removeNode(t,e){delete this.indexToNodeMap[t.globalElementIndex];const s=e.children.indexOf(t);e.children.splice(s,1),this.cachedListSelections={},this.removePendingChanges(t)}applyStyleToNodeAndChildren(t,e,s,r){if(t.style[e]=s,r(t,e),t.children)for(let i of t.children)this.applyStyleToNodeAndChildren(i,e,s,r)}applyCssToNodeAndChildren(t,e,s,r,i){if("*"!==s||r?(t.css[e]||(t.css[e]={}),t.css[e][s]=r):delete t.css[e],i(t,s),t.children)for(let o of t.children)this.applyCssToNodeAndChildren(o,e,s,r,i)}getNodeFromIndex(t){return this.indexToNodeMap[t]}getNodeById(t){const e=Object.values(this.indexToNodeMap).filter(e=>e.id===t);return(!e||e.length>1)&&(o("multiple nodes with this id!",Object.values(this.indexToNodeMap).filter(t=>t.id).map(t=>t.id),t),o(e.length,e)),e&&1===e.length?e[0]:null}get(t,e){return Array.isArray(e)?e.map(e=>this.getSingle(t,e)):this.getSingle(t,e)}getSingle(t,e){if(this.sharedData[e]&&this.sharedData[e][t.globalElementIndex]){const s=this.sharedData[e][t.globalElementIndex];return 56938516===s?0:s/r.BUFFER_PRECISION_FACTOR}return t[e]}hasChanges(){return this.changed}getQueue(){return this.queue}clearQueue(){this.queue={},this.changed=!1}transferBufferQueueData(){for(let t in this.sharedDataQueue){this.queue[t]=this.sharedDataQueueBuffers[t],this.sharedData[t]=this.sharedDataQueue[t];const e=this.sharedData[t].byteLength/Int32Array.BYTES_PER_ELEMENT,{buffer:s,values:r}=this.createBufferTransferValues(e,this.sharedDataQueue[t]);this.sharedDataQueueBuffers[t]=s,this.sharedDataQueue[t]=r}}updatePropertiesFromQueue(t,e=(()=>{})){for(let s in t){if(!t.hasOwnProperty(s))continue;const i=s.substr(0,"style;".length);if(this.ignoreDesign&&("style;"===i||-1!==r.IGNOREDESIGN_ATTRIBUTES.indexOf(s)))continue;let o;if("SharedArrayBuffer"in self&&t[s]instanceof SharedArrayBuffer)this.sharedData[s]=new Int32Array(t[s]);else{o=t[s];for(let t in o){if(!o.hasOwnProperty(t))continue;const n=parseInt(t),a=this.getNodeFromIndex(n);if(!a){console.error("node not found at index",n);continue}let l=o[t];if("style;"===i){const t=s.substr("style;".length);this.applyStyleToNodeAndChildren(a,t,l,e)}else if("css;"===s.substr(0,4)){const[t,r]=s.substr(4).split(";");this.applyCssToNodeAndChildren(a,t,r,l,e)}else-1!==r.ROUNDED_ATTRS.indexOf(s)&&("string"==typeof l&&(l=parseFloat(l)),l=Math.round(l)),a[s]=l,e(a,s)}}}}getVisNodeFromSelector(t){const e=t.lastIndexOf(">"),s=t.substr(0,e),r=t.substr(e+1),i=s?this.cachedListSelections[s]:null;let o=-1;const n=r.indexOf(":nth-child(");if(-1!==n&&(o=parseInt(r.substr(n+11)),i&&i[o]))return i[o];const a=[];if(this.findMatchingChildren(this.data,t,0,a),a&&1===a.length){const t=a[0];return-1!==o&&(this.cachedListSelections[s]||(this.cachedListSelections[s]={}),this.cachedListSelections[s][o]=t),t}return null}getVisNodesFromSelector(t,e){const s=[];return this.findMatchingChildren(t,e,0,s),s}findChildrenOfType(t,e,s){const r=t=>{for(const i of t.children)i.type===e&&s.push(i),0!==t.children.length&&r(i)};r(t)}filterNodesBySelector(t,e,s){return e.filter(e=>r.isCssRulePartialMatch(s,e,t))}findMatchingChildren(t,e,s,i,o=[]){if(!e&&""!==e)throw console.error(t,e,s,i,o),Error("undefined selector");let n=e.split(">").map(t=>t.trim()),a=n[s];if(0===s&&"svg"===a&&(a=n[++s],s===n.length))return i.push(t),void o.push(e);if(e.match(/^[a-z]+$/))return this.findChildrenOfType(t,e,i);for(let l=0;l<t.children.length;l++){let h=t.children[l],d=!1;r.isCssRulePartialMatch(a,h,t)&&(s===n.length-1?(i.push(h),o.push(e)):d=!0),h.children&&(d||n.length<2)&&s+1<n.length&&this.findMatchingChildren(h,e,s+1,i,o)}}static isCssRulePartialMatch(t,e,s){if(":not("===t.substr(0,5)){const i=t.substr(0,t.length-1).substr(5);return!r.isCssRulePartialMatch(i,e,s)}if("."===t[0]){const s=t.split(".");if(s.shift(),e.className){let t=!0;for(const r of s)-1===e.className.split(" ").indexOf(r)&&(t=!1);return t}}else if("#"===t[0]){if(t.substr(1)===e.id)return!0}else if(t.match(/^[a-z]+$/)){if(t===e.type)return!0}else{if(-1!==t.indexOf(":nth-child(")){let r="any",i=t;":"!==t[0]&&(r=t.substr(0,t.indexOf(":")),i=t.substr(t.indexOf(":")));const o=parseInt(i.substr(":nth-child(".length));return s.children.indexOf(e)===o-1&&("any"===r||e.type===r)}if(-1!==t.indexOf(".")){const s=t.indexOf("."),r=t.substr(0,s),i=t.substr(s+1);if(r===e.type&&e.className&&-1!==e.className.split(" ").indexOf(i))return!0}}return!1}}r.IGNOREDESIGN_ATTRIBUTES=["fill","stroke","opacity"],r.BUFFER_PRECISION_FACTOR=10,r.ROUNDED_ATTRS=["cx","cy"],e.VdomManager=r;let i=0;function o(...t){i<400&&(i++,console.log(...t))}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CSS_STYLES=["stroke","stroke-opacity","stroke-width","stroke-linejoin","fill","fill-opacity","font","opacity","font-family","font-size"],e.RELEVANT_ATTRS={svg:["fill","opacity","fill-opacity","stroke","stroke-opacity","stroke-width","font-size","font","font-family","text-anchor"],g:["fill","opacity","fill-opacity","stroke","stroke-opacity","stroke-width","font-size","font","font-family","text-anchor","clip-path"],rect:["fill","opacity","fill-opacity","stroke","stroke-opacity","stroke-width","x","y","width","height","clip-path"],circle:["fill","opacity","fill-opacity","stroke","stroke-opacity","stroke-width","cx","cy","r","clip-path"],path:["fill","opacity","fill-opacity","stroke","stroke-opacity","stroke-width","d","clip-path"],title:[],tspan:["dx","dy"],text:["fill","opacity","fill-opacity","stroke","stroke-opacity","stroke-width","font-size","font","font-family","text-anchor","href","x","y","dx","dy"],image:["opacity","x","y","width","height"],clippath:["id","fill","opacity","fill-opacity","stroke","stroke-opacity","stroke-width"],line:["opacity","stroke","stroke-opacity","stroke-width","x1","x2","y1","y2","clip-path"]};const r=["cx","cy","r","x","y","x1","x2","y1","y2","width","height","stroke-width"];e.ROUNDED_ATTRS={};for(const t of r)e.ROUNDED_ATTRS[t]=!0},function(t,e,s){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const i=r(s(0));e.default=class{constructor(t,e,s=!1,r=(()=>{})){this.vdom=t,this.canvas=e,this.forceSingle=s,this.onDrawn=r,this.parentValues={},this.lastFullSecond=0,this.countSinceLastFullSecond=0,this.circlesByColor={},this.rectsByColor={},this.drawTexts=[],this.drawImages=[],this.linesByColor={};const i=e.getContext("2d");if(!i)throw new Error("could not create canvas context");this.ctx=i,this.ctx.scale(this.vdom.data.scale,this.vdom.data.scale),this.ctx.save(),this.draw(),setTimeout(()=>{console.log(this.forceSingle,this.vdom.data)},1e3)}draw(){const t=this.ctx;t.restore(),t.save(),t.clearRect(0,0,this.vdom.data.width,this.vdom.data.height),this.drawLine(null,"start"),this.drawCircle(null,"start"),this.drawRect(null,"start"),this.drawText(null,"start"),this.drawImage(null,"start"),this.drawNodeAndChildren(this.vdom.data,this.forceSingle),this.drawLine(null,"end"),this.drawCircle(null,"end"),this.drawRect(null,"end"),this.drawText(null,"end"),this.drawImage(null,"end"),this.onDrawn();const e=Math.round(performance.now()/1e3);e!==this.lastFullSecond&&(this.lastFullSecond=e,this.countSinceLastFullSecond=0),this.countSinceLastFullSecond++}drawNodeAndChildren(t,e,s){if("clippath"===t.type&&!s)return;const r=this.ctx,i=Object.assign({},this.parentValues),n=!s&&(t.children.length||t.transform);if(n&&r.save(),this.applyTransform(t.transform),(t.transform||s)&&(e=!0),t["clip-path"])if("url(#"===t["clip-path"].substr(0,5)){const s=t["clip-path"].substr(5,t["clip-path"].length-6),i=this.vdom.getNodeById(s);if(e=!0,i){const t=new Path2D;this.drawNodeAndChildren(i,e,t),r.clip(t)}}else!function(...t){o<50&&(o++,console.error(...t))}("clip path format not supported:",t["clip-path"]);if(t.style.display&&"none"===t.style.display||(e?this.drawSingleNode(t,"forcesingle",s):this.drawSingleNode(t,"normal",s)),t.children){this.parentValues.fill=t.fill||this.parentValues.fill,this.parentValues["style;fill"]=t.style.fill||this.parentValues["style;fill"],this.parentValues.stroke=t.stroke||this.parentValues.stroke,this.parentValues["style;stroke"]=t.style.stroke||this.parentValues["style;stroke"],this.parentValues.opacity=t.opacity||this.parentValues.opacity;for(let r=0;r<t.children.length;r++)this.drawNodeAndChildren(t.children[r],e,s)}n&&r.restore(),this.parentValues=i}drawSingleNode(t,e="normal",s){const r=t.type,i=this["draw"+r.substr(0,1).toUpperCase()+r.substr(1)];if(!i)return console.error("no draw function yet for ",r);i.call(this,t,e,s)}drawClippath(t){}drawSvg(){}drawTitle(){}drawG(){}drawCircle(t,e="normal",s){if("normal"===e){const e=this.getFillStyle(t,"#000")+";"+this.getStrokeStyle(t);this.circlesByColor[e]||(this.circlesByColor[e]=[]),this.circlesByColor[e].push(t)}if("start"!==e){if("end"!==e){if("forcesingle"===e){let e=this.getFillStyle(t,"#000");const r=this.getStrokeStyle(t),i=this.vdom.get(t,"cx")||0,o=this.vdom.get(t,"cy")||0;this.ctx.beginPath(),this.ctx.fillStyle=e,this.ctx.strokeStyle=r,this.ctx.lineWidth=this.getStrokeWidth(t),this.ctx.moveTo(i+t.r,o),(s||this.ctx).arc(i,o,t.r,0,2*Math.PI),"none"===e||s||this.ctx.fill(),r&&"none"!==r&&!s&&this.ctx.stroke()}}else for(let t in this.circlesByColor)if(this.circlesByColor.hasOwnProperty(t)){const e=t.split(";"),s=e[0],r=e[1];this.ctx.fillStyle=s;let i=this.circlesByColor[t][0];const o=this.getStrokeWidth(i);this.ctx.lineWidth=void 0!==o?o:1,this.ctx.strokeStyle=r,this.ctx.beginPath();for(let e of this.circlesByColor[t]){const t=Math.round(this.vdom.get(e,"cx"))||0,s=Math.round(this.vdom.get(e,"cy"))||0,r=Math.round(this.vdom.get(e,"r"));this.ctx.save(),this.applyTransform(e.transform),this.ctx.moveTo(t+r,s),this.ctx.arc(t,s,r,0,2*Math.PI),this.ctx.restore()}"none"!==s&&this.ctx.fill(),r&&"none"!==r&&this.ctx.stroke()}}else this.circlesByColor={}}nodeUpdated(t,e){("*"===e||e.includes("fill")||e.includes("opacity"))&&delete t["fill-cache"],("*"===e||e.includes("stroke")||e.includes("opacity"))&&(delete t["stroke-cache"],delete t["strokewidth-cache"])}getFillStyle(t,e="none"){if("fill-cache"in t)return t["fill-cache"];let s=this.getAttributeStyleCss(t,"fill"),r=this.getAttributeStyleCss(t,"opacity")||1;r*=this.getAttributeStyleCss(t,"fill-opacity")||1;let o="";return this.parentValues.fill&&(o=this.parentValues.fill),this.parentValues["style;fill"]&&(o=this.parentValues["style;fill"]),this.parentValues.fill||this.parentValues["style;fill"]||(o=e),s=i.default.colorToRgba(s,r,o),t["fill-cache"]=s,s}getAttributeStyleCss(t,e){if(t.style[e])return t.style[e];{if(this.parentValues[`style;${e}`])return this.parentValues[`style;${e}`];let s=t[e],r=-1;for(const o in t.css)if(t.css[o][e]){const n=i.default.getCssRuleSpecificityNumber(o);n>r&&(s=t.css[o][e],r=n)}return s}}getStrokeStyle(t,e="none"){if("stroke-cache"in t)return t["stroke-cache"];const s=this.getAttributeStyleCss(t,"stroke");let r=this.getAttributeStyleCss(t,"opacity")||1;r*=this.getAttributeStyleCss(t,"stroke-opacity")||1;let o="";return o=this.parentValues.stroke?this.parentValues.stroke:e,t["stroke-cache"]=void 0!==s?i.default.colorToRgba(s,r):o,t["stroke-cache"]}getStrokeWidth(t){if("strokewidth-cache"in t)return t["strokewidth-cache"];const e=this.getAttributeStyleCss(t,"stroke-width");return t["strokewidth-cache"]=void 0===e?void 0:parseFloat(e),t["strokewidth-cache"]}drawRect(t,e="normal",s){if("normal"===e){const e=this.getFillStyle(t,"#000")+";"+this.getStrokeStyle(t);this.rectsByColor[e]||(this.rectsByColor[e]=[]),this.rectsByColor[e].push(t)}if("start"!==e){if("end"!==e){if("forcesingle"===e){let e=this.getFillStyle(t,"#000");const r=this.getStrokeStyle(t),i=this.vdom.get(t,"x")||0,o=this.vdom.get(t,"y")||0;e&&"none"!==e&&!s&&(this.ctx.fillStyle=e,this.ctx.fillRect(i,o,t.width,t.height)),s&&s.rect(i,o,t.width,t.height),"none"===r||s||(this.ctx.strokeStyle=r,this.ctx.beginPath(),this.ctx.rect(i,o,t.width,t.height),this.ctx.stroke())}}else for(let t in this.rectsByColor)if(this.rectsByColor.hasOwnProperty(t)){const e=t.split(";"),s=e[0],r=e[1];this.ctx.fillStyle=s;let i=this.rectsByColor[t][0];const o=this.getStrokeWidth(i);this.ctx.lineWidth=void 0!==o?o:1,this.ctx.strokeStyle=r,this.ctx.beginPath();for(let e of this.rectsByColor[t]){const t=Math.round(this.vdom.get(e,"x"))||0,s=Math.round(this.vdom.get(e,"y"))||0;this.ctx.save(),this.applyTransform(e.transform),this.ctx.moveTo(t,s),this.ctx.rect(t,s,e.width,e.height),this.ctx.restore()}"none"!==s&&this.ctx.fill(),r&&"none"!==r&&this.ctx.stroke()}}else this.rectsByColor={}}drawText(t,e="normal",s=!1){const r=t=>{if(""===t.text)return;let e=this.getAttributeStyleCss(t,"font-family")||"Times New Roman",s="16px";const r=this.getAttributeStyleCss(t,"font-size");r&&(s=i.default.convertSizeToPx(r)+"px");let o=this.getAttributeStyleCss(t,"font");o||(o=s+" "+e);let n=this.getAttributeStyleCss(t,"text-anchor");n&&("middle"===n&&(n="center"),this.ctx.textAlign=n),this.ctx.font=o,this.ctx.fillStyle=this.getFillStyle(t,"#000");let a=this.vdom.get(t,"x")||0,l=this.vdom.get(t,"y")||0,h=i.default.convertSizeToPx(t.dx,!1)||0,d=i.default.convertSizeToPx(t.dy,!1)||0;this.ctx.fillText(t.text,a+h,l+d)};if("start"!==e)if("normal"!==e){if("forcesingle"===e)return r(t);if("end"!==e);else for(const t of this.drawTexts)r(t)}else this.drawTexts.push(t);else this.drawTexts=[]}drawImage(t,e="normal"){const s=t=>{if(""===t.href)return;let e=t.fill?t.fill:t.style.fill;e||(e="#000"),this.ctx.fillStyle=e;let s=this.vdom.get(t,"x")||0,r=this.vdom.get(t,"y")||0,i=t.width||0,o=t.height||0;if(t.image)try{this.ctx.drawImage(t.image,s,r,i,o)}catch(t){console.log(t)}};if("start"!==e)if("normal"!==e){if("forcesingle"===e)return s(t);if("end"!==e);else for(const t of this.drawImages)s(t)}else this.drawImages.push(t);else this.drawImages=[]}drawPath(t,e="normal",s){if("normal"!==e&&"forcesingle"!==e)return;const r=this.getFillStyle(t,"#000"),i=this.getStrokeStyle(t),o=this.getStrokeWidth(t);let n=new Path2D(t.d);if(this.ctx.fillStyle=r,void 0!==i&&"none"!==i){void 0!==o&&(this.ctx.lineWidth=o),this.ctx.strokeStyle=i;const e=this.getAttributeStyleCss(t,"stroke-linejoin");e&&("bevel"===e||"round"===e||"miter"===e?this.ctx.lineJoin=e:console.error("unknown line join value:",e)),s||this.ctx.stroke(n)}r&&"none"!==r&&!s&&this.ctx.fill(n),s&&s.addPath(n)}drawTspan(t,e="normal"){if("normal"!==e&&"forcesingle"!==e)return;this.ctx.font="10px Arial",this.ctx.fillStyle="#000000";const s="middle"===t.style.textAnchor?"center":t.style.textAnchor;this.ctx.textAlign=s,this.ctx.fillText(t.text,this.vdom.get(t,"x"),this.vdom.get(t,"y"))}drawTextpath(t){console.warn("no draw function yet for textpath")}drawLine(t,e="normal"){if(this.vdom.data.scale,"normal"===e){const e=this.getStrokeStyle(t),s=this.getStrokeWidth(t);if("none"===e||0===s)return;const r=`${e};${s}`;this.linesByColor[r]||(this.linesByColor[r]=[]),this.linesByColor[r].push(t)}if("start"!==e){if("end"!==e){if("forcesingle"===e){this.ctx.beginPath();const[e,s,r,i]=this.vdom.get(t,["x1","x2","y1","y2"]).map(t=>Math.round(t)||0);this.ctx.moveTo(e,r),this.ctx.lineTo(s,i),this.ctx.strokeStyle=this.getStrokeStyle(t),this.ctx.lineWidth=this.getStrokeWidth(t),this.ctx.stroke()}}else for(let t in this.linesByColor)if(this.linesByColor.hasOwnProperty(t)){const e=t.split(";"),s=e[0],r=e[1];this.ctx.strokeStyle=s,this.ctx.lineWidth=parseFloat(r),this.ctx.beginPath();for(let e of this.linesByColor[t]){e.transform&&(this.ctx.save(),this.applyTransform(e.transform));const[t,s,r,i]=this.vdom.get(e,["x1","x2","y1","y2"]).map(t=>Math.round(t)||0);this.ctx.moveTo(t,r),this.ctx.lineTo(s,i),e.transform&&this.ctx.restore()}this.ctx.stroke()}}else this.linesByColor={}}drawDefs(t){}drawMarker(t){}applyTransform(t){const e=t?i.default.parseTransform(t):null;if(e){e.rotateLast||this.ctx.rotate(e.rotate*Math.PI/180);const t=e.translateBeforeScale?e.translateX:e.translateX*e.scaleX,s=e.translateBeforeScale?e.translateY:e.translateY*e.scaleY;return this.ctx.transform(e.scaleX,0,0,e.scaleY,t,s),e.rotateLast&&this.ctx.rotate(e.rotate*Math.PI/180),!0}return!1}};let o=0},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),s(8);const r=s(9);e.default=r},function(t,e){},function(t,e,s){t.exports=function(){return s(10)('!function(t){var e={};function s(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,s),i.l=!0,i.exports}s.m=t,s.c=e,s.d=function(t,e,r){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)s.d(r,i,function(e){return t[e]}.bind(null,i));return r},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="",s(s.s=0)}([function(t,e,s){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const i=s(1),a=r(s(2));let n;const o=self;let l;o.onmessage=function(t){const e=t.data;if(e&&e.cmd)switch(e.cmd){case"INIT":l=new i.VdomManager(e.data.visData,!1);const t=!!e.data.safeMode;n=new a.default(l,e.data.canvas,t,()=>{o.postMessage({msg:"DRAWN"})});break;case"UPDATE_NODES":const s=e;for(let t of s.data.enterExit){if("EXIT"===t.cmd){const e=l.getNodeFromIndex(t.childGlobalIndex),s=l.getNodeFromIndex(t.parentGlobalIndex);l.removeNode(e,s)}if("ENTER"===t.cmd){const e=t.node;t.keepChildren||(e.children=[]),l.addNode(e),l.addNodeToParent(e,t.parentGlobalIndex),n.addNode&&n.addNode(e)}}n.updatePropertiesFromQueue?n.updatePropertiesFromQueue(s.data.update):l.updatePropertiesFromQueue(s.data.update,(t,e)=>{n.nodeUpdated(t,e)}),n.draw();break;default:console.error("did not find command ",e.cmd)}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});class r{constructor(t,e){this.data=t,this.ignoreDesign=e,this.sharedData={},this.sharedDataQueue={},this.sharedDataQueueBuffers={},this.queue={},this.useSharedArrayFor=["cx","cy","x1","x2","y1","y2","x","y"],this.indexToNodeMap={},this.changed=!1,this.cachedListSelections={},this.ensureNodesMapped()}ensureInitialized(t,e=!0,s){if("class"===t&&(t="className"),e&&-1!==this.useSharedArrayFor.indexOf(t)){const e=s<500?1e3:Math.round(2*s);if(this.sharedData[t]){const s=Int32Array.BYTES_PER_ELEMENT*e;if(this.sharedData[t].byteLength/s<.6){const{buffer:s,values:r}=this.createBufferTransferValues(e,this.sharedDataQueue[t]);this.sharedDataQueue[t]=r,this.sharedDataQueueBuffers[t]=s}}else{let s;!this.queue[t]||this.queue[t]instanceof SharedArrayBuffer||(s=this.queue[t]);const{buffer:r,values:i}=this.createBufferTransferValues(e,void 0,s);this.sharedDataQueue[t]=i,this.sharedDataQueueBuffers[t]=r}}else this.queue[t]||(this.queue[t]={})}createBufferTransferValues(t,e,s){let i=new SharedArrayBuffer(Int32Array.BYTES_PER_ELEMENT*t);const a=new Int32Array(i);if(s)for(const t in s)if(s.hasOwnProperty(t)){let e=s[t];"string"==typeof e&&(e=parseFloat(e)),a[t]=e*r.BUFFER_PRECISION_FACTOR}if(e)for(let t=0;t<e.length;t++)e[t]&&(a[t]=e[t]);return{buffer:i,values:a}}set(t,e,s,i=!0){if("class"===e&&(e="className"),void 0===t.globalElementIndex)throw console.error("No index",t),new Error("Element has no index");const a=t.globalElementIndex,n=i&&-1!==this.useSharedArrayFor.indexOf(e)?"shared":"raw";try{this.changed=!0,"shared"===n?("string"==typeof s&&(s=parseFloat(s)),s*=r.BUFFER_PRECISION_FACTOR,0===(s=Math.round(s))&&(s=56938516),this.sharedDataQueue[e][a]=s):(this.queue[e][a]=s,this.sharedDataQueue[e]&&this.sharedData[e][a]&&(this.sharedDataQueue[e][a]=0))}catch(s){console.error(s),console.log(this.queue,this.sharedData,n,e,t,a)}}removePendingChanges(t){const e=t.globalElementIndex;for(const t in this.queue)this.queue.hasOwnProperty(t)&&delete this.queue[t][e];for(const t in this.sharedData)this.sharedDataQueue.hasOwnProperty(t)&&(this.sharedDataQueue[t][e]=0)}ensureNodesMapped(){const t=e=>{void 0===e.globalElementIndex&&console.error("no element index",e),this.indexToNodeMap[e.globalElementIndex]=e;for(const s of e.children)t(s)};t(this.data)}enableFrontendDesignProperties(){this.ignoreDesign=!1}addNodeToParent(t,e){if("svg"!==t.type){const s=this.getNodeFromIndex(e);if(!s)return console.error("could not add node without parent",e,t,Object.keys(this.indexToNodeMap)),void new Error("parent not found");s.children.push(t)}}addNode(t){this.indexToNodeMap[t.globalElementIndex]=t}removeNode(t,e){delete this.indexToNodeMap[t.globalElementIndex];const s=e.children.indexOf(t);e.children.splice(s,1),this.cachedListSelections={},this.removePendingChanges(t)}applyStyleToNodeAndChildren(t,e,s,r){if(t.style[e]=s,r(t,e),t.children)for(let i of t.children)this.applyStyleToNodeAndChildren(i,e,s,r)}applyCssToNodeAndChildren(t,e,s,r,i){if("*"!==s||r?(t.css[e]||(t.css[e]={}),t.css[e][s]=r):delete t.css[e],i(t,s),t.children)for(let a of t.children)this.applyCssToNodeAndChildren(a,e,s,r,i)}getNodeFromIndex(t){return this.indexToNodeMap[t]}getNodeById(t){const e=Object.values(this.indexToNodeMap).filter(e=>e.id===t);return(!e||e.length>1)&&(a("multiple nodes with this id!",Object.values(this.indexToNodeMap).filter(t=>t.id).map(t=>t.id),t),a(e.length,e)),e&&1===e.length?e[0]:null}get(t,e){return Array.isArray(e)?e.map(e=>this.getSingle(t,e)):this.getSingle(t,e)}getSingle(t,e){if(this.sharedData[e]&&this.sharedData[e][t.globalElementIndex]){const s=this.sharedData[e][t.globalElementIndex];return 56938516===s?0:s/r.BUFFER_PRECISION_FACTOR}return t[e]}hasChanges(){return this.changed}getQueue(){return this.queue}clearQueue(){this.queue={},this.changed=!1}transferBufferQueueData(){for(let t in this.sharedDataQueue){this.queue[t]=this.sharedDataQueueBuffers[t],this.sharedData[t]=this.sharedDataQueue[t];const e=this.sharedData[t].byteLength/Int32Array.BYTES_PER_ELEMENT,{buffer:s,values:r}=this.createBufferTransferValues(e,this.sharedDataQueue[t]);this.sharedDataQueueBuffers[t]=s,this.sharedDataQueue[t]=r}}updatePropertiesFromQueue(t,e=(()=>{})){for(let s in t){if(!t.hasOwnProperty(s))continue;const i=s.substr(0,"style;".length);if(this.ignoreDesign&&("style;"===i||-1!==r.IGNOREDESIGN_ATTRIBUTES.indexOf(s)))continue;let a;if("SharedArrayBuffer"in self&&t[s]instanceof SharedArrayBuffer)this.sharedData[s]=new Int32Array(t[s]);else{a=t[s];for(let t in a){if(!a.hasOwnProperty(t))continue;const n=parseInt(t),o=this.getNodeFromIndex(n);if(!o){console.error("node not found at index",n);continue}let l=a[t];if("style;"===i){const t=s.substr("style;".length);this.applyStyleToNodeAndChildren(o,t,l,e)}else if("css;"===s.substr(0,4)){const[t,r]=s.substr(4).split(";");this.applyCssToNodeAndChildren(o,t,r,l,e)}else-1!==r.ROUNDED_ATTRS.indexOf(s)&&("string"==typeof l&&(l=parseFloat(l)),l=Math.round(l)),o[s]=l,e(o,s)}}}}getVisNodeFromSelector(t){const e=t.lastIndexOf(">"),s=t.substr(0,e),r=t.substr(e+1),i=s?this.cachedListSelections[s]:null;let a=-1;const n=r.indexOf(":nth-child(");if(-1!==n&&(a=parseInt(r.substr(n+11)),i&&i[a]))return i[a];const o=[];if(this.findMatchingChildren(this.data,t,0,o),o&&1===o.length){const t=o[0];return-1!==a&&(this.cachedListSelections[s]||(this.cachedListSelections[s]={}),this.cachedListSelections[s][a]=t),t}return null}getVisNodesFromSelector(t,e){const s=[];return this.findMatchingChildren(t,e,0,s),s}findChildrenOfType(t,e,s){const r=t=>{for(const i of t.children)i.type===e&&s.push(i),0!==t.children.length&&r(i)};r(t)}filterNodesBySelector(t,e,s){return e.filter(e=>r.isCssRulePartialMatch(s,e,t))}findMatchingChildren(t,e,s,i,a=[]){if(!e&&""!==e)throw console.error(t,e,s,i,a),Error("undefined selector");let n=e.split(">").map(t=>t.trim()),o=n[s];if(0===s&&"svg"===o&&(o=n[++s],s===n.length))return i.push(t),void a.push(e);if(e.match(/^[a-z]+$/))return this.findChildrenOfType(t,e,i);for(let l=0;l<t.children.length;l++){let h=t.children[l],c=!1;r.isCssRulePartialMatch(o,h,t)&&(s===n.length-1?(i.push(h),a.push(e)):c=!0),h.children&&(c||n.length<2)&&s+1<n.length&&this.findMatchingChildren(h,e,s+1,i,a)}}static isCssRulePartialMatch(t,e,s){if(":not("===t.substr(0,5)){const i=t.substr(0,t.length-1).substr(5);return!r.isCssRulePartialMatch(i,e,s)}if("."===t[0]){const s=t.split(".");if(s.shift(),e.className){let t=!0;for(const r of s)-1===e.className.split(" ").indexOf(r)&&(t=!1);return t}}else if("#"===t[0]){if(t.substr(1)===e.id)return!0}else if(t.match(/^[a-z]+$/)){if(t===e.type)return!0}else{if(-1!==t.indexOf(":nth-child(")){let r="any",i=t;":"!==t[0]&&(r=t.substr(0,t.indexOf(":")),i=t.substr(t.indexOf(":")));const a=parseInt(i.substr(":nth-child(".length));return s.children.indexOf(e)===a-1&&("any"===r||e.type===r)}if(-1!==t.indexOf(".")){const s=t.indexOf("."),r=t.substr(0,s),i=t.substr(s+1);if(r===e.type&&e.className&&-1!==e.className.split(" ").indexOf(i))return!0}}return!1}}r.IGNOREDESIGN_ATTRIBUTES=["fill","stroke","opacity"],r.BUFFER_PRECISION_FACTOR=10,r.ROUNDED_ATTRS=["cx","cy"],e.VdomManager=r;let i=0;function a(...t){i<400&&(i++,console.log(...t))}},function(t,e,s){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const i=r(s(3));e.default=class{constructor(t,e,s=!1,r=(()=>{})){this.vdom=t,this.canvas=e,this.forceSingle=s,this.onDrawn=r,this.parentValues={},this.lastFullSecond=0,this.countSinceLastFullSecond=0,this.circlesByColor={},this.rectsByColor={},this.drawTexts=[],this.drawImages=[],this.linesByColor={};const i=e.getContext("2d");if(!i)throw new Error("could not create canvas context");this.ctx=i,this.ctx.scale(this.vdom.data.scale,this.vdom.data.scale),this.ctx.save(),this.draw(),setTimeout(()=>{console.log(this.forceSingle,this.vdom.data)},1e3)}draw(){const t=this.ctx;t.restore(),t.save(),t.clearRect(0,0,this.vdom.data.width,this.vdom.data.height),this.drawLine(null,"start"),this.drawCircle(null,"start"),this.drawRect(null,"start"),this.drawText(null,"start"),this.drawImage(null,"start"),this.drawNodeAndChildren(this.vdom.data,this.forceSingle),this.drawLine(null,"end"),this.drawCircle(null,"end"),this.drawRect(null,"end"),this.drawText(null,"end"),this.drawImage(null,"end"),this.onDrawn();const e=Math.round(performance.now()/1e3);e!==this.lastFullSecond&&(this.lastFullSecond=e,this.countSinceLastFullSecond=0),this.countSinceLastFullSecond++}drawNodeAndChildren(t,e,s){if("clippath"===t.type&&!s)return;const r=this.ctx,i=Object.assign({},this.parentValues),n=!s&&(t.children.length||t.transform);if(n&&r.save(),this.applyTransform(t.transform),(t.transform||s)&&(e=!0),t["clip-path"])if("url(#"===t["clip-path"].substr(0,5)){const s=t["clip-path"].substr(5,t["clip-path"].length-6),i=this.vdom.getNodeById(s);if(e=!0,i){const t=new Path2D;this.drawNodeAndChildren(i,e,t),r.clip(t)}}else!function(...t){a<50&&(a++,console.error(...t))}("clip path format not supported:",t["clip-path"]);if(t.style.display&&"none"===t.style.display||(e?this.drawSingleNode(t,"forcesingle",s):this.drawSingleNode(t,"normal",s)),t.children){this.parentValues.fill=t.fill||this.parentValues.fill,this.parentValues["style;fill"]=t.style.fill||this.parentValues["style;fill"],this.parentValues.stroke=t.stroke||this.parentValues.stroke,this.parentValues["style;stroke"]=t.style.stroke||this.parentValues["style;stroke"],this.parentValues.opacity=t.opacity||this.parentValues.opacity;for(let r=0;r<t.children.length;r++)this.drawNodeAndChildren(t.children[r],e,s)}n&&r.restore(),this.parentValues=i}drawSingleNode(t,e="normal",s){const r=t.type,i=this["draw"+r.substr(0,1).toUpperCase()+r.substr(1)];if(!i)return console.error("no draw function yet for ",r);i.call(this,t,e,s)}drawClippath(t){}drawSvg(){}drawTitle(){}drawG(){}drawCircle(t,e="normal",s){if("normal"===e){const e=this.getFillStyle(t,"#000")+";"+this.getStrokeStyle(t);this.circlesByColor[e]||(this.circlesByColor[e]=[]),this.circlesByColor[e].push(t)}if("start"!==e){if("end"!==e){if("forcesingle"===e){let e=this.getFillStyle(t,"#000");const r=this.getStrokeStyle(t),i=this.vdom.get(t,"cx")||0,a=this.vdom.get(t,"cy")||0;this.ctx.beginPath(),this.ctx.fillStyle=e,this.ctx.strokeStyle=r,this.ctx.lineWidth=this.getStrokeWidth(t),this.ctx.moveTo(i+t.r,a),(s||this.ctx).arc(i,a,t.r,0,2*Math.PI),"none"===e||s||this.ctx.fill(),r&&"none"!==r&&!s&&this.ctx.stroke()}}else for(let t in this.circlesByColor)if(this.circlesByColor.hasOwnProperty(t)){const e=t.split(";"),s=e[0],r=e[1];this.ctx.fillStyle=s;let i=this.circlesByColor[t][0];const a=this.getStrokeWidth(i);this.ctx.lineWidth=void 0!==a?a:1,this.ctx.strokeStyle=r,this.ctx.beginPath();for(let e of this.circlesByColor[t]){const t=Math.round(this.vdom.get(e,"cx"))||0,s=Math.round(this.vdom.get(e,"cy"))||0,r=Math.round(this.vdom.get(e,"r"));this.ctx.save(),this.applyTransform(e.transform),this.ctx.moveTo(t+r,s),this.ctx.arc(t,s,r,0,2*Math.PI),this.ctx.restore()}"none"!==s&&this.ctx.fill(),r&&"none"!==r&&this.ctx.stroke()}}else this.circlesByColor={}}nodeUpdated(t,e){("*"===e||e.includes("fill")||e.includes("opacity"))&&delete t["fill-cache"],("*"===e||e.includes("stroke")||e.includes("opacity"))&&(delete t["stroke-cache"],delete t["strokewidth-cache"])}getFillStyle(t,e="none"){if("fill-cache"in t)return t["fill-cache"];let s=this.getAttributeStyleCss(t,"fill"),r=this.getAttributeStyleCss(t,"opacity")||1;r*=this.getAttributeStyleCss(t,"fill-opacity")||1;let a="";return this.parentValues.fill&&(a=this.parentValues.fill),this.parentValues["style;fill"]&&(a=this.parentValues["style;fill"]),this.parentValues.fill||this.parentValues["style;fill"]||(a=e),s=i.default.colorToRgba(s,r,a),t["fill-cache"]=s,s}getAttributeStyleCss(t,e){if(t.style[e])return t.style[e];{if(this.parentValues[`style;${e}`])return this.parentValues[`style;${e}`];let s=t[e],r=-1;for(const a in t.css)if(t.css[a][e]){const n=i.default.getCssRuleSpecificityNumber(a);n>r&&(s=t.css[a][e],r=n)}return s}}getStrokeStyle(t,e="none"){if("stroke-cache"in t)return t["stroke-cache"];const s=this.getAttributeStyleCss(t,"stroke");let r=this.getAttributeStyleCss(t,"opacity")||1;r*=this.getAttributeStyleCss(t,"stroke-opacity")||1;let a="";return a=this.parentValues.stroke?this.parentValues.stroke:e,t["stroke-cache"]=void 0!==s?i.default.colorToRgba(s,r):a,t["stroke-cache"]}getStrokeWidth(t){if("strokewidth-cache"in t)return t["strokewidth-cache"];const e=this.getAttributeStyleCss(t,"stroke-width");return t["strokewidth-cache"]=void 0===e?void 0:parseFloat(e),t["strokewidth-cache"]}drawRect(t,e="normal",s){if("normal"===e){const e=this.getFillStyle(t,"#000")+";"+this.getStrokeStyle(t);this.rectsByColor[e]||(this.rectsByColor[e]=[]),this.rectsByColor[e].push(t)}if("start"!==e){if("end"!==e){if("forcesingle"===e){let e=this.getFillStyle(t,"#000");const r=this.getStrokeStyle(t),i=this.vdom.get(t,"x")||0,a=this.vdom.get(t,"y")||0;e&&"none"!==e&&!s&&(this.ctx.fillStyle=e,this.ctx.fillRect(i,a,t.width,t.height)),s&&s.rect(i,a,t.width,t.height),"none"===r||s||(this.ctx.strokeStyle=r,this.ctx.beginPath(),this.ctx.rect(i,a,t.width,t.height),this.ctx.stroke())}}else for(let t in this.rectsByColor)if(this.rectsByColor.hasOwnProperty(t)){const e=t.split(";"),s=e[0],r=e[1];this.ctx.fillStyle=s;let i=this.rectsByColor[t][0];const a=this.getStrokeWidth(i);this.ctx.lineWidth=void 0!==a?a:1,this.ctx.strokeStyle=r,this.ctx.beginPath();for(let e of this.rectsByColor[t]){const t=Math.round(this.vdom.get(e,"x"))||0,s=Math.round(this.vdom.get(e,"y"))||0;this.ctx.save(),this.applyTransform(e.transform),this.ctx.moveTo(t,s),this.ctx.rect(t,s,e.width,e.height),this.ctx.restore()}"none"!==s&&this.ctx.fill(),r&&"none"!==r&&this.ctx.stroke()}}else this.rectsByColor={}}drawText(t,e="normal",s=!1){const r=t=>{if(""===t.text)return;let e=this.getAttributeStyleCss(t,"font-family")||"Times New Roman",s="16px";const r=this.getAttributeStyleCss(t,"font-size");r&&(s=i.default.convertSizeToPx(r)+"px");let a=this.getAttributeStyleCss(t,"font");a||(a=s+" "+e);let n=this.getAttributeStyleCss(t,"text-anchor");n&&("middle"===n&&(n="center"),this.ctx.textAlign=n),this.ctx.font=a,this.ctx.fillStyle=this.getFillStyle(t,"#000");let o=this.vdom.get(t,"x")||0,l=this.vdom.get(t,"y")||0,h=i.default.convertSizeToPx(t.dx,!1)||0,c=i.default.convertSizeToPx(t.dy,!1)||0;this.ctx.fillText(t.text,o+h,l+c)};if("start"!==e)if("normal"!==e){if("forcesingle"===e)return r(t);if("end"!==e);else for(const t of this.drawTexts)r(t)}else this.drawTexts.push(t);else this.drawTexts=[]}drawImage(t,e="normal"){const s=t=>{if(""===t.href)return;let e=t.fill?t.fill:t.style.fill;e||(e="#000"),this.ctx.fillStyle=e;let s=this.vdom.get(t,"x")||0,r=this.vdom.get(t,"y")||0,i=t.width||0,a=t.height||0;if(t.image)try{this.ctx.drawImage(t.image,s,r,i,a)}catch(t){console.log(t)}};if("start"!==e)if("normal"!==e){if("forcesingle"===e)return s(t);if("end"!==e);else for(const t of this.drawImages)s(t)}else this.drawImages.push(t);else this.drawImages=[]}drawPath(t,e="normal",s){if("normal"!==e&&"forcesingle"!==e)return;const r=this.getFillStyle(t,"#000"),i=this.getStrokeStyle(t),a=this.getStrokeWidth(t);let n=new Path2D(t.d);if(this.ctx.fillStyle=r,void 0!==i&&"none"!==i){void 0!==a&&(this.ctx.lineWidth=a),this.ctx.strokeStyle=i;const e=this.getAttributeStyleCss(t,"stroke-linejoin");e&&("bevel"===e||"round"===e||"miter"===e?this.ctx.lineJoin=e:console.error("unknown line join value:",e)),s||this.ctx.stroke(n)}r&&"none"!==r&&!s&&this.ctx.fill(n),s&&s.addPath(n)}drawTspan(t,e="normal"){if("normal"!==e&&"forcesingle"!==e)return;this.ctx.font="10px Arial",this.ctx.fillStyle="#000000";const s="middle"===t.style.textAnchor?"center":t.style.textAnchor;this.ctx.textAlign=s,this.ctx.fillText(t.text,this.vdom.get(t,"x"),this.vdom.get(t,"y"))}drawTextpath(t){console.warn("no draw function yet for textpath")}drawLine(t,e="normal"){if(this.vdom.data.scale,"normal"===e){const e=this.getStrokeStyle(t),s=this.getStrokeWidth(t);if("none"===e||0===s)return;const r=`${e};${s}`;this.linesByColor[r]||(this.linesByColor[r]=[]),this.linesByColor[r].push(t)}if("start"!==e){if("end"!==e){if("forcesingle"===e){this.ctx.beginPath();const[e,s,r,i]=this.vdom.get(t,["x1","x2","y1","y2"]).map(t=>Math.round(t)||0);this.ctx.moveTo(e,r),this.ctx.lineTo(s,i),this.ctx.strokeStyle=this.getStrokeStyle(t),this.ctx.lineWidth=this.getStrokeWidth(t),this.ctx.stroke()}}else for(let t in this.linesByColor)if(this.linesByColor.hasOwnProperty(t)){const e=t.split(";"),s=e[0],r=e[1];this.ctx.strokeStyle=s,this.ctx.lineWidth=parseFloat(r),this.ctx.beginPath();for(let e of this.linesByColor[t]){e.transform&&(this.ctx.save(),this.applyTransform(e.transform));const[t,s,r,i]=this.vdom.get(e,["x1","x2","y1","y2"]).map(t=>Math.round(t)||0);this.ctx.moveTo(t,r),this.ctx.lineTo(s,i),e.transform&&this.ctx.restore()}this.ctx.stroke()}}else this.linesByColor={}}drawDefs(t){}drawMarker(t){}applyTransform(t){const e=t?i.default.parseTransform(t):null;if(e){e.rotateLast||this.ctx.rotate(e.rotate*Math.PI/180);const t=e.translateBeforeScale?e.translateX:e.translateX*e.scaleX,s=e.translateBeforeScale?e.translateY:e.translateY*e.scaleY;return this.ctx.transform(e.scaleX,0,0,e.scaleY,t,s),e.rotateLast&&this.ctx.rotate(e.rotate*Math.PI/180),!0}return!1}};let a=0},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});class r{static parseTransform(t){const e={translateX:0,translateY:0,scaleX:1,scaleY:1,rotate:0,translateBeforeScale:!1,rotateLast:!1};if(t){if("string"!=typeof t)return e.scaleX=t.k,e.scaleY=t.k,e.translateX=t.x,e.translateY=t.y,e.translateBeforeScale=!0,e;let s=t;s=s.replace(/ /g,"");const r=/\\s*translate\\(([-0-9.]+),([-0-9.]+)\\)/.exec(s);r&&(e.translateX=parseFloat(r[1]),e.translateY=parseFloat(r[2]));const i=/\\s*scale\\(([-0-9.]+)(,[-0-9.]+)?\\)/.exec(s);i&&(e.scaleX=parseFloat(i[1]),e.scaleY=i[2]?parseFloat(i[2].substr(1)):parseFloat(i[1]));const a=/\\s*rotate\\(([-0-9.]+)\\)/.exec(s);a&&(e.rotate=parseFloat(a[1])),/\\s*translate\\(([-0-9.]+),([-0-9.]+)\\)scale\\(([-0-9.,]+)\\)/.exec(s)&&(e.translateBeforeScale=!0),/\\s*rotate\\(([-0-9.,]+)\\)$/.exec(s)&&(e.rotateLast=!0);const n=/\\s*matrix\\(([-0-9.]+),([-0-9.]+),([-0-9.]+),([-0-9.]+),([-0-9.]+),([-0-9.]+)\\)/.exec(s);n&&(e.scaleX=parseFloat(n[1]),e.scaleY=parseFloat(n[4]),e.translateX=parseFloat(n[5]),e.translateY=parseFloat(n[6]))}return e}static addTransforms(t,e){return{translateX:t.translateX+e.translateX,translateY:t.translateY+e.translateY,scaleX:t.scaleX*e.scaleX,scaleY:t.scaleY*e.scaleY,rotate:t.rotate+e.rotate,translateBeforeScale:!1,rotateLast:!1}}static convertSizeToPx(t,e=!0){const s=e?14:void 0;return void 0===t?s:"number"==typeof t?t:"em"===t.substr(-2)?Math.round(12*parseFloat(t)):"px"===t.substr(-2)?parseInt(t):t.match(/^[0-9]+$/)?parseInt(t):(console.warn("size in unsupported format: ",t),s)}static colorToRgba(t,e=1,s="none"){if("none"===t)return t;t||(t=s);const i=`${t}-${e}`;if(r.rgbaCache[i])return r.rgbaCache[i];if(t=r.CssNamedColorToHex(t),1===e&&"string"==typeof t)return r.rgbaCache[i]=t,t;let a;if("string"==typeof t&&"#"===t[0]){let s;if(!/^#([A-Fa-f0-9]{3}){1,2}$/.test(t))throw new Error("Bad Hex");3==(s=t.substring(1)).length&&(s=s[0]+s[0]+s[1]+s[1]+s[2]+s[2]),a="rgba("+[(s="0x"+s)>>16&255,s>>8&255,255&s].join(",")+","+e+")"}else if("object"==typeof t){if("r"in t)a="rgba("+t.r+","+t.g+","+t.b+","+e+")";else if("h"in t){const s=r.hslToRgb(t.h/360,t.s,t.l);a="rgba("+s.r+","+s.g+","+s.b+","+e+")"}}else"rgb("===t.substr(0,4)&&(a=t.substr(0,t.length-1).replace("rgb","rgba")+", "+e+")");return r.rgbaCache[i]=a,a}static hslToRgb(t,e,s){var r,i,a;if(0==e)r=i=a=s;else{var n=function(t,e,s){return s<0&&(s+=1),s>1&&(s-=1),s<1/6?t+6*(e-t)*s:s<.5?e:s<2/3?t+(e-t)*(2/3-s)*6:t},o=s<.5?s*(1+e):s+e-s*e,l=2*s-o;r=n(l,o,t+1/3),i=n(l,o,t),a=n(l,o,t-1/3)}return{r:Math.round(255*r),g:Math.round(255*i),b:Math.round(255*a)}}static CssNamedColorToHex(t){return"string"==typeof t&&i[t.toUpperCase()]?i[t.toUpperCase()]:t}static getCssRuleSpecificityNumber(t){let e=0;t=t.replace(/ >/g,">").replace(/> /g,">");const s=[].concat.apply([],t.split(" ").map(t=>t.split(">")));for(const t of s){e+=100;const s=t[0];if("#"===s)e+=1e3;else if("."===s){const s=t.split(".").length-1;e+=Math.min(900,100*s)}}return e}}r.rgbaCache={},e.default=r;const i={ALICEBLUE:"#F0F8FF",ANTIQUEWHITE:"#FAEBD7",AQUA:"#00FFFF",AQUAMARINE:"#7FFFD4",AZURE:"#F0FFFF",BEIGE:"#F5F5DC",BISQUE:"#FFE4C4",BLACK:"#000000",BLANCHEDALMOND:"#FFEBCD",BLUE:"#0000FF",BLUEVIOLET:"#8A2BE2",BROWN:"#A52A2A",BURLYWOOD:"#DEB887",CADETBLUE:"#5F9EA0",CHARTREUSE:"#7FFF00",CHOCOLATE:"#D2691E",CORAL:"#FF7F50",CORNFLOWERBLUE:"#6495ED",CORNSILK:"#FFF8DC",CRIMSON:"#DC143C",CYAN:"#00FFFF",DARKBLUE:"#00008B",DARKCYAN:"#008B8B",DARKGOLDENROD:"#B8860B",DARKGRAY:"#A9A9A9",DARKGREY:"#A9A9A9",DARKGREEN:"#006400",DARKKHAKI:"#BDB76B",DARKMAGENTA:"#8B008B",DARKOLIVEGREEN:"#556B2F",DARKORANGE:"#FF8C00",DARKORCHID:"#9932CC",DARKRED:"#8B0000",DARKSALMON:"#E9967A",DARKSEAGREEN:"#8FBC8F",DARKSLATEBLUE:"#483D8B",DARKSLATEGRAY:"#2F4F4F",DARKSLATEGREY:"#2F4F4F",DARKTURQUOISE:"#00CED1",DARKVIOLET:"#9400D3",DEEPPINK:"#FF1493",DEEPSKYBLUE:"#00BFFF",DIMGRAY:"#696969",DIMGREY:"#696969",DODGERBLUE:"#1E90FF",FIREBRICK:"#B22222",FLORALWHITE:"#FFFAF0",FORESTGREEN:"#228B22",FUCHSIA:"#FF00FF",GAINSBORO:"#DCDCDC",GHOSTWHITE:"#F8F8FF",GOLD:"#FFD700",GOLDENROD:"#DAA520",GRAY:"#808080",GREY:"#808080",GREEN:"#008000",GREENYELLOW:"#ADFF2F",HONEYDEW:"#F0FFF0",HOTPINK:"#FF69B4",INDIANRED:"#CD5C5C",INDIGO:"#4B0082",IVORY:"#FFFFF0",KHAKI:"#F0E68C",LAVENDER:"#E6E6FA",LAVENDERBLUSH:"#FFF0F5",LAWNGREEN:"#7CFC00",LEMONCHIFFON:"#FFFACD",LIGHTBLUE:"#ADD8E6",LIGHTCORAL:"#F08080",LIGHTCYAN:"#E0FFFF",LIGHTGOLDENRODYELLOW:"#FAFAD2",LIGHTGRAY:"#D3D3D3",LIGHTGREY:"#D3D3D3",LIGHTGREEN:"#90EE90",LIGHTPINK:"#FFB6C1",LIGHTSALMON:"#FFA07A",LIGHTSEAGREEN:"#20B2AA",LIGHTSKYBLUE:"#87CEFA",LIGHTSLATEGRAY:"#778899",LIGHTSLATEGREY:"#778899",LIGHTSTEELBLUE:"#B0C4DE",LIGHTYELLOW:"#FFFFE0",LIME:"#00FF00",LIMEGREEN:"#32CD32",LINEN:"#FAF0E6",MAGENTA:"#FF00FF",MAROON:"#800000",MEDIUMAQUAMARINE:"#66CDAA",MEDIUMBLUE:"#0000CD",MEDIUMORCHID:"#BA55D3",MEDIUMPURPLE:"#9370DB",MEDIUMSEAGREEN:"#3CB371",MEDIUMSLATEBLUE:"#7B68EE",MEDIUMSPRINGGREEN:"#00FA9A",MEDIUMTURQUOISE:"#48D1CC",MEDIUMVIOLETRED:"#C71585",MIDNIGHTBLUE:"#191970",MINTCREAM:"#F5FFFA",MISTYROSE:"#FFE4E1",MOCCASIN:"#FFE4B5",NAVAJOWHITE:"#FFDEAD",NAVY:"#000080",OLDLACE:"#FDF5E6",OLIVE:"#808000",OLIVEDRAB:"#6B8E23",ORANGE:"#FFA500",ORANGERED:"#FF4500",ORCHID:"#DA70D6",PALEGOLDENROD:"#EEE8AA",PALEGREEN:"#98FB98",PALETURQUOISE:"#AFEEEE",PALEVIOLETRED:"#DB7093",PAPAYAWHIP:"#FFEFD5",PEACHPUFF:"#FFDAB9",PERU:"#CD853F",PINK:"#FFC0CB",PLUM:"#DDA0DD",POWDERBLUE:"#B0E0E6",PURPLE:"#800080",REBECCAPURPLE:"#663399",RED:"#FF0000",ROSYBROWN:"#BC8F8F",ROYALBLUE:"#4169E1",SADDLEBROWN:"#8B4513",SALMON:"#FA8072",SANDYBROWN:"#F4A460",SEAGREEN:"#2E8B57",SEASHELL:"#FFF5EE",SIENNA:"#A0522D",SILVER:"#C0C0C0",SKYBLUE:"#87CEEB",SLATEBLUE:"#6A5ACD",SLATEGRAY:"#708090",SLATEGREY:"#708090",SNOW:"#FFFAFA",SPRINGGREEN:"#00FF7F",STEELBLUE:"#4682B4",TAN:"#D2B48C",TEAL:"#008080",THISTLE:"#D8BFD8",TOMATO:"#FF6347",TURQUOISE:"#40E0D0",VIOLET:"#EE82EE",WHEAT:"#F5DEB3",WHITE:"#FFFFFF",WHITESMOKE:"#F5F5F5",YELLOW:"#FFFF00",YELLOWGREEN:"#9ACD32"}}]);\n//# sourceMappingURL=ae575840bf0cd0f0313d.worker.js.map',s.p+"ae575840bf0cd0f0313d.worker.js")}},function(t,e,s){"use strict";var r=window.URL||window.webkitURL;t.exports=function(t,e){try{try{var s;try{(s=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder)).append(t),s=s.getBlob()}catch(e){s=new Blob([t])}return new Worker(r.createObjectURL(s))}catch(e){return new Worker("data:application/javascript,"+encodeURIComponent(t))}}catch(t){if(!e)throw Error("Inline worker is not supported");return new Worker(e)}}}])});
//# sourceMappingURL=ssvg.js.map